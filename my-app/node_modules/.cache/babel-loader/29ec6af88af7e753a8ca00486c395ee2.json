{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kaiwen Song\\\\Desktop\\\\Etsy-Inventory-Tracker\\\\my-app\\\\src\\\\components\\\\CreatePopup.js\";\nimport React from 'react';\nimport Form from 'react-bootstrap/Form';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Button from 'react-bootstrap/Button';\nimport ReactDOM from 'react-dom';\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Hook extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentProperty: {},\n      currentName: props.selectedProduct != null ? props.selectedProduct.hooks[props.id] : '',\n      loaded: false\n    };\n\n    if (this.props.productIds[0] != null) {\n      axios.get(\"http://localhost:5000/hooks/getProperties/\" + (this.props.selectedProduct != null && this.props.selectedProduct.properties[this.props.id] != null ? this.props.productIds[this.props.productNames.indexOf(this.props.selectedProduct.hooks[this.props.id])] : this.props.productIds[0])).then(response => {\n        this.setState({\n          currentProperty: response.data\n        });\n      });\n    }\n\n    this.displayProperties = this.displayProperties.bind(this);\n    this.renderHooks = this.renderHooks.bind(this);\n  }\n\n  displayProperties(event) {\n    this.setState({\n      currentName: event.target.value\n    });\n    axios.get(\"http://localhost:5000/hooks/getProperties/\" + this.props.productIds[event.target.selectedIndex]).then(response => {\n      this.setState({\n        currentProperty: response.data\n      });\n    });\n  }\n\n  renderHooks() {\n    var hooks = []; // hooks.push(<Col md = {3}>\n    //   <Form.Label>Product</Form.Label>\n    //   <Form.Select onChange={this.displayProperties} className=\"form-control hooks-field\" id=\"hooks-select\" value={this.state.currentName}>\n    //     {this.props.productNames.map(product => <option>{product}</option>)}\n    //   </Form.Select>\n    // </Col>)\n\n    var properties = this.state.currentProperty;\n    var keys = Object.keys(properties);\n\n    for (var i = 0; i < keys.length; i++) {\n      var selections = properties[keys[i]].map(property => /*#__PURE__*/_jsxDEV(\"option\", {\n        children: property\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 60\n      }, this));\n      selections.unshift( /*#__PURE__*/_jsxDEV(\"option\", {\n        children: 'Any'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 26\n      }, this));\n\n      if (this.props.selectedProduct != null && this.props.selectedProduct.properties[this.props.id] != null) {\n        selections = selections.filter(option => option.props.children != this.props.selectedProduct.properties[this.props.id][keys[i]]);\n        selections.unshift( /*#__PURE__*/_jsxDEV(\"option\", {\n          children: this.props.selectedProduct.properties[this.props.id][keys[i]]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 28\n        }, this));\n      }\n\n      hooks.push( /*#__PURE__*/_jsxDEV(Col, {\n        md: 3,\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          id: \"property-select\",\n          children: keys[i]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n          id: \"property-select\",\n          className: \"hooks-field\",\n          children: selections\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 18\n      }, this));\n    }\n\n    hooks.push( /*#__PURE__*/_jsxDEV(Col, {\n      md: 3,\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        className: \"end\",\n        id: \"property-select\",\n        children: \"Loss per Order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        id: \"property-select\",\n        type: \"number\",\n        placeholder: \"Enter Number\",\n        className: \"losses-select hooks-field\",\n        defaultValue: this.props.selectedProduct != null ? this.props.selectedProduct.losses[this.props.id] : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 16\n    }, this));\n    const noRows = Math.ceil(hooks.length / 4);\n    return Array.from(Array(noRows)).map((n, i) => /*#__PURE__*/_jsxDEV(Row, {\n      children: hooks.slice(i * 4, (i + 1) * 4)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this));\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: this.renderHooks()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (this.props.productNames.length == 0) {\n      axios.get(\"http://localhost:5000/hooks/getProperties/\" + (nextProps.selectedProduct != null && nextProps.selectedProduct.properties[nextProps.id] != null ? nextProps.productIds[nextProps.productNames.indexOf(nextProps.selectedProduct.hooks[nextProps.id])] : nextProps.productIds[0])).then(response => {\n        console.log(response.data);\n        this.setState({\n          currentProperty: response.data,\n          currentName: nextProps.selectedProduct != null ? nextProps.selectedProduct.hooks[nextProps.id] : '',\n          loaded: true\n        });\n      });\n    }\n  }\n\n}\n\nexport default class CreatePopup extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hooks: 1,\n      edit: false\n    };\n    this.addHook = this.addHook.bind(this);\n    this.hidePopup = this.hidePopup.bind(this);\n    this.createTracker = this.createTracker.bind(this);\n    this.resetPopup = this.resetPopup.bind(this);\n    this.renderHooks = this.renderHooks.bind(this);\n    this.validateFields = this.validateFields.bind(this);\n  }\n\n  resetPopup() {\n    document.querySelectorAll('.pForm').forEach(form => {\n      console.log(form);\n      form.reset();\n    });\n    this.setState({\n      hooks: 1\n    });\n  }\n\n  hidePopup() {\n    document.querySelector('.popup-wrapper').style.display = \"none\";\n    document.querySelector(\"body\").style.overflow = \"visible\";\n    this.resetPopup();\n  }\n\n  async createTracker() {\n    if (!this.validateFields()) {\n      alert(\"Please fill out all fields\");\n    } else {\n      document.querySelector('.loading-wrapper').style.display = \"initial\";\n      var newTracker = {};\n      var fieldNames = [\"name\", \"qty\", 'link'];\n      var fieldValues = document.querySelectorAll('.popup-form');\n\n      for (var i = 0; i < fieldNames.length; i++) {\n        newTracker[fieldNames[i]] = fieldValues[i].value;\n      }\n\n      newTracker.hooks = Array.from(document.querySelectorAll('#hooks-select')).map(hook => hook.value);\n      newTracker.losses = Array.from(document.querySelectorAll('.losses-select')).map(loss => loss.value);\n      var properties = [];\n      var propertyList = document.querySelectorAll('#property-select');\n      var property = {};\n\n      for (var i = 0; i < propertyList.length; i += 2) {\n        if (propertyList[i].classList.contains(\"end\")) {\n          properties.push(property);\n          property = {};\n        } else {\n          property[propertyList[i].innerText] = propertyList[i + 1].value;\n        }\n      }\n\n      newTracker.properties = properties;\n\n      if (this.props.selectedProduct == null) {\n        axios.post(\"http://localhost:5000/trackers/addTracker\", newTracker).then(res => {\n          newTracker._id = res.data._id;\n          newTracker.imgSrc = res.data.src;\n          newTracker.buyDate = res.data.buyDate;\n          this.props.add(newTracker);\n          document.querySelector('.loading-wrapper').style.display = \"none\";\n          this.hidePopup();\n        });\n      } else {\n        newTracker._id = this.props.selectedProduct._id;\n        newTracker.imgSrc = this.props.selectedProduct.imgSrc;\n        var result = await axios.post(\"http://localhost:5000/trackers/updateTracker/\" + this.props.selectedProduct._id, newTracker);\n        newTracker.buyDate = result.data.buyDate;\n        this.props.updateProduct(newTracker);\n        document.querySelector('.loading-wrapper').style.display = \"none\";\n        this.hidePopup();\n      }\n    }\n  }\n\n  addHook() {\n    this.setState({\n      hooks: this.state.hooks + 1\n    });\n  }\n\n  renderHooks() {\n    var hookList = [];\n\n    for (var i = 0; i < this.state.hooks; i++) {\n      hookList.push( /*#__PURE__*/_jsxDEV(Hook, {\n        id: i,\n        productNames: this.props.productNames,\n        productIds: this.props.productIds,\n        selectedProduct: this.props.selectedProduct,\n        displayProperties: this.displayProperties\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 21\n      }, this));\n    }\n\n    return hookList;\n  }\n\n  validateFields() {\n    var textFields = document.querySelectorAll(\".popup-form\");\n\n    for (var i = 0; i < textFields.length; i++) {\n      if (textFields[i].value == \"\") {\n        return false;\n      }\n    }\n\n    var hookFields = document.querySelectorAll(\".hooks-field\");\n\n    for (var i = 0; i < hookFields.length; i++) {\n      if (hookFields[i].value == \"\") {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"popup-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"loading-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://upload.wikimedia.org/wikipedia/commons/7/7d/Pedro_luis_romani_ruiz.gif\",\n          class: \"popup-loading\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"popup\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          onClick: this.hidePopup,\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"16\",\n          height: \"16\",\n          fill: \"currentColor\",\n          class: \"bi bi-x-lg\",\n          viewBox: \"0 0 16 16\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          class: \"text-center\",\n          children: this.props.selectedProduct != null ? 'Edit Tracker' : 'Create Tracker'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          className: \"pForm\",\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              md: 8,\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                className: \"popup-form\",\n                type: \"text\",\n                defaultValue: this.props.selectedProduct != null ? this.props.selectedProduct.name : '',\n                placeholder: \"Enter name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              md: 4,\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Starting Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                className: \"popup-form\",\n                type: \"number\",\n                defaultValue: this.props.selectedProduct != null ? this.props.selectedProduct.qty : '',\n                placeholder: \"Enter Number\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Amazon Link\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            className: \"popup-form\",\n            type: \"text\",\n            defaultValue: this.props.selectedProduct != null ? this.props.selectedProduct.link : '',\n            placeholder: \"Enter Link\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"hooks-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Hooks with Etsy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: this.addHook,\n            children: \"Add New Hook\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"hooks\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"pForm\",\n            children: this.renderHooks()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: this.createTracker,\n          id: \"create-tracker-btn\",\n          children: this.props.selectedProduct != null ? 'Edit Tracker' : 'Create Tracker'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (document.querySelector('.popup-wrapper').style.display == \"initial\") {\n      document.querySelector(\"body\").style.overflow = \"hidden\";\n    }\n\n    if (nextProps.selectedProduct != null) {\n      console.log(nextProps.selectedProduct);\n      this.setState({\n        hooks: nextProps.selectedProduct.hooks.length\n      });\n    }\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Kaiwen Song/Desktop/Etsy-Inventory-Tracker/my-app/src/components/CreatePopup.js"],"names":["React","Form","Row","Col","Button","ReactDOM","axios","Hook","Component","constructor","props","state","currentProperty","currentName","selectedProduct","hooks","id","loaded","productIds","get","properties","productNames","indexOf","then","response","setState","data","displayProperties","bind","renderHooks","event","target","value","selectedIndex","keys","Object","i","length","selections","map","property","unshift","filter","option","children","push","losses","noRows","Math","ceil","Array","from","n","slice","render","UNSAFE_componentWillReceiveProps","nextProps","console","log","CreatePopup","edit","addHook","hidePopup","createTracker","resetPopup","validateFields","document","querySelectorAll","forEach","form","reset","querySelector","style","display","overflow","alert","newTracker","fieldNames","fieldValues","hook","loss","propertyList","classList","contains","innerText","post","res","_id","imgSrc","src","buyDate","add","result","updateProduct","hookList","textFields","hookFields","name","qty","link"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Form from 'react-bootstrap/Form'\r\nimport Row from 'react-bootstrap/Row'\r\nimport Col from 'react-bootstrap/Col'\r\nimport Button from 'react-bootstrap/Button'\r\nimport ReactDOM from 'react-dom'\r\nimport axios from \"axios\";\r\n\r\nclass Hook extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      currentProperty: {},\r\n      currentName: props.selectedProduct != null ? props.selectedProduct.hooks[props.id] : '',\r\n      loaded: false\r\n    }\r\n\r\n    if (this.props.productIds[0] != null) {\r\n      axios.get(\"http://localhost:5000/hooks/getProperties/\" + (this.props.selectedProduct != null && this.props.selectedProduct.properties[this.props.id] != null ? this.props.productIds[this.props.productNames.indexOf(this.props.selectedProduct.hooks[this.props.id])] : this.props.productIds[0]))\r\n        .then(response => {\r\n          this.setState({\r\n            currentProperty: response.data\r\n          })\r\n        })\r\n    }\r\n\r\n    this.displayProperties = this.displayProperties.bind(this)\r\n    this.renderHooks = this.renderHooks.bind(this)\r\n  }\r\n\r\n  displayProperties(event) {\r\n    this.setState({\r\n      currentName: event.target.value\r\n    })\r\n    axios.get(\"http://localhost:5000/hooks/getProperties/\" + this.props.productIds[event.target.selectedIndex])\r\n      .then(response => {\r\n        this.setState({\r\n          currentProperty: response.data\r\n        })\r\n      })\r\n  }\r\n\r\n  renderHooks() {\r\n    var hooks = []\r\n\r\n    // hooks.push(<Col md = {3}>\r\n    //   <Form.Label>Product</Form.Label>\r\n    //   <Form.Select onChange={this.displayProperties} className=\"form-control hooks-field\" id=\"hooks-select\" value={this.state.currentName}>\r\n    //     {this.props.productNames.map(product => <option>{product}</option>)}\r\n    //   </Form.Select>\r\n    // </Col>)\r\n\r\n    var properties = this.state.currentProperty\r\n    var keys = Object.keys(properties)\r\n\r\n    for (var i = 0; i < keys.length; i++) {\r\n      var selections = properties[keys[i]].map(property => <option>{property}</option>)\r\n      selections.unshift(<option>{'Any'}</option>)\r\n\r\n      if (this.props.selectedProduct != null && this.props.selectedProduct.properties[this.props.id] != null) {\r\n        selections = selections.filter(option => option.props.children != this.props.selectedProduct.properties[this.props.id][keys[i]])\r\n        selections.unshift(<option>{this.props.selectedProduct.properties[this.props.id][keys[i]]}</option>)\r\n      }\r\n\r\n      hooks.push(<Col md = {3}>\r\n        <Form.Label id = \"property-select\">{keys[i]}</Form.Label>\r\n        <Form.Select id = \"property-select\" className = \"hooks-field\">\r\n          {selections}\r\n        </Form.Select>\r\n      </Col>)\r\n    }\r\n    hooks.push(<Col md = {3}>\r\n      <Form.Label className = \"end\" id = \"property-select\">Loss per Order</Form.Label>\r\n      <Form.Control id = \"property-select\" type=\"number\" placeholder=\"Enter Number\" className=\"losses-select hooks-field\" defaultValue={this.props.selectedProduct != null ? this.props.selectedProduct.losses[this.props.id] : ''}/>\r\n    </Col>)\r\n\r\n    const noRows = Math.ceil(hooks.length / 4);\r\n\r\n    return Array.from(Array(noRows)).map((n, i) => (\r\n      <Row>\r\n       {hooks.slice(i* 4, (i + 1)* 4)}\r\n      </Row>\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.renderHooks()}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (this.props.productNames.length == 0) {\r\n      axios.get(\"http://localhost:5000/hooks/getProperties/\" + (nextProps.selectedProduct != null && nextProps.selectedProduct.properties[nextProps.id] != null ? nextProps.productIds[nextProps.productNames.indexOf(nextProps.selectedProduct.hooks[nextProps.id])] : nextProps.productIds[0]))\r\n        .then(response => {\r\n          console.log(response.data)\r\n          this.setState({\r\n            currentProperty: response.data,\r\n            currentName: nextProps.selectedProduct != null ? nextProps.selectedProduct.hooks[nextProps.id] : '',\r\n            loaded: true\r\n          })\r\n        })\r\n    }\r\n  }\r\n}\r\n\r\nexport default class CreatePopup extends React.Component{\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      hooks: 1,\r\n      edit: false\r\n    }\r\n\r\n    this.addHook = this.addHook.bind(this)\r\n    this.hidePopup = this.hidePopup.bind(this)\r\n    this.createTracker = this.createTracker.bind(this)\r\n    this.resetPopup = this.resetPopup.bind(this)\r\n    this.renderHooks = this.renderHooks.bind(this)\r\n    this.validateFields = this.validateFields.bind(this)\r\n  }\r\n\r\n  resetPopup() {\r\n    document.querySelectorAll('.pForm').forEach(form => {\r\n      console.log(form)\r\n      form.reset()\r\n    })\r\n\r\n    this.setState({\r\n      hooks: 1\r\n    })\r\n  }\r\n\r\n  hidePopup() {\r\n      document.querySelector('.popup-wrapper').style.display = \"none\"\r\n      document.querySelector(\"body\").style.overflow = \"visible\";\r\n      this.resetPopup()\r\n  }\r\n\r\n  async createTracker() {\r\n\r\n    if (!this.validateFields()) {\r\n      alert(\"Please fill out all fields\")\r\n    }\r\n    else {\r\n      document.querySelector('.loading-wrapper').style.display = \"initial\"\r\n\r\n      var newTracker = {}\r\n      var fieldNames = [\"name\", \"qty\", 'link']\r\n      var fieldValues = document.querySelectorAll('.popup-form')\r\n\r\n      for (var i = 0; i < fieldNames.length; i++) {\r\n        newTracker[fieldNames[i]] = fieldValues[i].value\r\n      }\r\n\r\n      newTracker.hooks = Array.from(document.querySelectorAll('#hooks-select')).map(hook => hook.value)\r\n      newTracker.losses = Array.from(document.querySelectorAll('.losses-select')).map(loss => loss.value)\r\n\r\n      var properties = []\r\n      var propertyList = document.querySelectorAll('#property-select')\r\n      var property = {}\r\n      for (var i = 0; i < propertyList.length; i += 2) {\r\n\r\n        if (propertyList[i].classList.contains(\"end\")) {\r\n\r\n          properties.push(property)\r\n          property = {}\r\n        }\r\n        else {\r\n          property[propertyList[i].innerText] = propertyList[i + 1].value\r\n        }\r\n      }\r\n\r\n      newTracker.properties = properties\r\n\r\n      if (this.props.selectedProduct == null) {\r\n        axios.post(\"http://localhost:5000/trackers/addTracker\", newTracker)\r\n          .then(res => {\r\n            newTracker._id = res.data._id\r\n            newTracker.imgSrc = res.data.src\r\n            newTracker.buyDate = res.data.buyDate\r\n\r\n            this.props.add(newTracker)\r\n\r\n            document.querySelector('.loading-wrapper').style.display = \"none\"\r\n            this.hidePopup()\r\n          })\r\n      }\r\n      else {\r\n        newTracker._id = this.props.selectedProduct._id\r\n        newTracker.imgSrc = this.props.selectedProduct.imgSrc\r\n\r\n        var result = await axios.post(\"http://localhost:5000/trackers/updateTracker/\" + this.props.selectedProduct._id, newTracker)\r\n        newTracker.buyDate = result.data.buyDate\r\n        this.props.updateProduct(newTracker)\r\n\r\n        document.querySelector('.loading-wrapper').style.display = \"none\"\r\n        this.hidePopup()\r\n      }\r\n    }\r\n  }\r\n\r\n  addHook() {\r\n    this.setState({\r\n      hooks: this.state.hooks + 1\r\n    })\r\n  }\r\n\r\n  renderHooks() {\r\n    var hookList = []\r\n\r\n    for (var i = 0; i < this.state.hooks; i++) {\r\n      hookList.push(<Hook id = {i} key = {i} productNames = {this.props.productNames} productIds = {this.props.productIds} selectedProduct={this.props.selectedProduct} displayProperties={this.displayProperties}/>)\r\n    }\r\n\r\n    return hookList\r\n  }\r\n\r\n  validateFields() {\r\n\r\n    var textFields = document.querySelectorAll(\".popup-form\")\r\n    for (var i = 0; i < textFields.length; i++) {\r\n      if (textFields[i].value == \"\") {\r\n        return false\r\n      }\r\n    }\r\n\r\n    var hookFields = document.querySelectorAll(\".hooks-field\")\r\n    for (var i = 0; i < hookFields.length; i++) {\r\n      if (hookFields[i].value == \"\") {\r\n        return false\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div class = \"popup-wrapper\">\r\n        <div class = \"loading-wrapper\">\r\n          <img src = \"https://upload.wikimedia.org/wikipedia/commons/7/7d/Pedro_luis_romani_ruiz.gif\" class = \"popup-loading\"></img>\r\n        </div>\r\n        <div class = \"popup\">\r\n          <svg onClick={this.hidePopup} xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-x-lg\" viewBox=\"0 0 16 16\">\r\n            <path d=\"M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z\"/>\r\n          </svg>\r\n          <h1 class = \"text-center\">{this.props.selectedProduct != null ? 'Edit Tracker' : 'Create Tracker'}</h1>\r\n          <Form className = \"pForm\">\r\n            <Row>\r\n              <Col md = {8}>\r\n                <Form.Label>Name</Form.Label>\r\n                <Form.Control className = \"popup-form\" type=\"text\" defaultValue={this.props.selectedProduct != null ? this.props.selectedProduct.name : ''} placeholder=\"Enter name\" />\r\n              </Col>\r\n              <Col md = {4}>\r\n                <Form.Label>Starting Quantity</Form.Label>\r\n                <Form.Control className = \"popup-form\" type=\"number\" defaultValue={this.props.selectedProduct != null ? this.props.selectedProduct.qty : ''} placeholder=\"Enter Number\" />\r\n              </Col>\r\n            </Row>\r\n            <Form.Label>Amazon Link</Form.Label>\r\n            <Form.Control className = \"popup-form\" type=\"text\" defaultValue={this.props.selectedProduct != null ? this.props.selectedProduct.link : ''} placeholder=\"Enter Link\" />\r\n          </Form>\r\n\r\n          <div class = \"hooks-header\">\r\n            <h3>Hooks with Etsy</h3>\r\n            <Button onClick = {this.addHook}>Add New Hook</Button>\r\n          </div>\r\n          <div class = \"hooks\">\r\n            <form className = \"pForm\">\r\n              {this.renderHooks()}\r\n            </form>\r\n          </div>\r\n\r\n          <Button onClick = {this.createTracker} id = \"create-tracker-btn\">{this.props.selectedProduct != null ? 'Edit Tracker' : 'Create Tracker'}</Button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (document.querySelector('.popup-wrapper').style.display == \"initial\") {\r\n      document.querySelector(\"body\").style.overflow = \"hidden\";\r\n    }\r\n\r\n    if (nextProps.selectedProduct != null) {\r\n      console.log(nextProps.selectedProduct)\r\n      this.setState({\r\n        hooks: nextProps.selectedProduct.hooks.length\r\n      })\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}