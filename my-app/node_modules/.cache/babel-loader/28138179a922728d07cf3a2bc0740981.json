{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kaiwen Song\\\\Desktop\\\\Etsy-Inventory-Tracker\\\\my-app\\\\src\\\\components\\\\CreatePopup.js\";\nimport React from 'react';\nimport Form from 'react-bootstrap/Form';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Button from 'react-bootstrap/Button';\nimport ReactDOM from 'react-dom';\nimport axios from \"axios\"; // class Hook extends React.Component {\n//   constructor(props) {\n//     super(props)\n//\n//     this.state = {\n//       currentProperty: {},\n//       currentName: props.selectedProduct != null ? props.selectedProduct.hooks[props.id] : '',\n//       loaded: false\n//     }\n//\n//     if (this.props.productIds[0] != null) {\n//       axios.get(\"http://localhost:5000/hooks/getProperties/\" + (this.props.selectedProduct != null && this.props.selectedProduct.properties[this.props.id] != null ? this.props.productIds[this.props.productNames.indexOf(this.props.selectedProduct.hooks[this.props.id])] : this.props.productIds[0]))\n//         .then(response => {\n//           this.setState({\n//             currentProperty: response.data\n//           })\n//         })\n//     }\n//\n//     this.displayProperties = this.displayProperties.bind(this)\n//     this.renderHooks = this.renderHooks.bind(this)\n//   }\n//\n//   displayProperties(event) {\n//     this.setState({\n//       currentName: event.target.value\n//     })\n//     axios.get(\"http://localhost:5000/hooks/getProperties/\" + this.props.productIds[event.target.selectedIndex])\n//       .then(response => {\n//         this.setState({\n//           currentProperty: response.data\n//         })\n//       })\n//   }\n//\n//   renderHooks() {\n//     var hooks = []\n//\n//\n//     hooks.push(<Col md = {3}>\n//       <Form.Label>Product</Form.Label>\n//       <Form.Select onChange={this.displayProperties} className=\"form-control hooks-field\" id=\"hooks-select\" value={this.state.currentName}>\n//         {this.props.productNames.map(product => <option>{product}</option>)}\n//       </Form.Select>\n//     </Col>)\n//\n//     var properties = this.state.currentProperty\n//     var keys = Object.keys(properties)\n//\n//     for (var i = 0; i < keys.length; i++) {\n//       var selections = properties[keys[i]].map(property => <option>{property}</option>)\n//       selections.unshift(<option>{'Any'}</option>)\n//\n//       if (this.props.selectedProduct != null && this.props.selectedProduct.properties[this.props.id] != null) {\n//         selections = selections.filter(option => option.props.children != this.props.selectedProduct.properties[this.props.id][keys[i]])\n//         selections.unshift(<option>{this.props.selectedProduct.properties[this.props.id][keys[i]]}</option>)\n//       }\n//\n//       hooks.push(<Col md = {3}>\n//         <Form.Label id = \"property-select\">{keys[i]}</Form.Label>\n//         <Form.Select id = \"property-select\" className = \"hooks-field\">\n//           {selections}\n//         </Form.Select>\n//       </Col>)\n//     }\n//     hooks.push(<Col md = {3}>\n//       <Form.Label className = \"end\" id = \"property-select\">Loss per Order</Form.Label>\n//       <Form.Control id = \"property-select\" type=\"number\" placeholder=\"Enter Number\" className=\"losses-select hooks-field\" defaultValue={this.props.selectedProduct != null ? this.props.selectedProduct.losses[this.props.id] : ''}/>\n//     </Col>)\n//\n//     const noRows = Math.ceil(hooks.length / 4);\n//\n//     return Array.from(Array(noRows)).map((n, i) => (\n//       <Row>\n//        {hooks.slice(i* 4, (i + 1)* 4)}\n//       </Row>\n//     ));\n//   }\n//\n//   render() {\n//     return (\n//       <div>\n//         {this.renderHooks()}\n//       </div>\n//     )\n//   }\n//\n//   UNSAFE_componentWillReceiveProps(nextProps) {\n//     if (this.props.productNames.length == 0) {\n//       axios.get(\"http://localhost:5000/hooks/getProperties/\" + (nextProps.selectedProduct != null && nextProps.selectedProduct.properties[nextProps.id] != null ? nextProps.productIds[nextProps.productNames.indexOf(nextProps.selectedProduct.hooks[nextProps.id])] : nextProps.productIds[0]))\n//         .then(response => {\n//           console.log(response.data)\n//           this.setState({\n//             currentProperty: response.data,\n//             currentName: nextProps.selectedProduct != null ? nextProps.selectedProduct.hooks[nextProps.id] : '',\n//             loaded: true\n//           })\n//         })\n//     }\n//   }\n// }\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class CreatePopup extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hooks: 1,\n      edit: false\n    };\n    this.addHook = this.addHook.bind(this);\n    this.hidePopup = this.hidePopup.bind(this);\n    this.createTracker = this.createTracker.bind(this);\n    this.resetPopup = this.resetPopup.bind(this);\n    this.renderHooks = this.renderHooks.bind(this);\n    this.validateFields = this.validateFields.bind(this);\n  }\n\n  resetPopup() {\n    document.querySelectorAll('.pForm').forEach(form => {\n      console.log(form);\n      form.reset();\n    });\n    this.setState({\n      hooks: 1\n    });\n  }\n\n  hidePopup() {\n    document.querySelector('.popup-wrapper').style.display = \"none\";\n    document.querySelector(\"body\").style.overflow = \"visible\";\n    this.resetPopup();\n  }\n\n  async createTracker() {\n    if (!this.validateFields()) {\n      alert(\"Please fill out all fields\");\n    } else {\n      document.querySelector('.loading-wrapper').style.display = \"initial\";\n      var newTracker = {};\n      var fieldNames = [\"name\", \"qty\", 'link'];\n      var fieldValues = document.querySelectorAll('.popup-form');\n\n      for (var i = 0; i < fieldNames.length; i++) {\n        newTracker[fieldNames[i]] = fieldValues[i].value;\n      }\n\n      newTracker.hooks = Array.from(document.querySelectorAll('#hooks-select')).map(hook => hook.value);\n      newTracker.losses = Array.from(document.querySelectorAll('.losses-select')).map(loss => loss.value);\n      var properties = [];\n      var propertyList = document.querySelectorAll('#property-select');\n      var property = {};\n\n      for (var i = 0; i < propertyList.length; i += 2) {\n        if (propertyList[i].classList.contains(\"end\")) {\n          properties.push(property);\n          property = {};\n        } else {\n          property[propertyList[i].innerText] = propertyList[i + 1].value;\n        }\n      }\n\n      newTracker.properties = properties;\n\n      if (this.props.selectedProduct == null) {\n        axios.post(\"http://localhost:5000/trackers/addTracker\", newTracker).then(res => {\n          newTracker._id = res.data._id;\n          newTracker.imgSrc = res.data.src;\n          newTracker.buyDate = res.data.buyDate;\n          this.props.add(newTracker);\n          document.querySelector('.loading-wrapper').style.display = \"none\";\n          this.hidePopup();\n        });\n      } else {\n        newTracker._id = this.props.selectedProduct._id;\n        newTracker.imgSrc = this.props.selectedProduct.imgSrc;\n        var result = await axios.post(\"http://localhost:5000/trackers/updateTracker/\" + this.props.selectedProduct._id, newTracker);\n        newTracker.buyDate = result.data.buyDate;\n        this.props.updateProduct(newTracker);\n        document.querySelector('.loading-wrapper').style.display = \"none\";\n        this.hidePopup();\n      }\n    }\n  }\n\n  addHook() {\n    this.setState({\n      hooks: this.state.hooks + 1\n    });\n  }\n\n  renderHooks() {\n    var hookList = [];\n\n    for (var i = 0; i < this.state.hooks; i++) {\n      hookList.push( /*#__PURE__*/_jsxDEV(Hook, {\n        id: i,\n        productNames: this.props.productNames,\n        productIds: this.props.productIds,\n        selectedProduct: this.props.selectedProduct,\n        displayProperties: this.displayProperties\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 21\n      }, this));\n    }\n\n    return hookList;\n  }\n\n  validateFields() {\n    var textFields = document.querySelectorAll(\".popup-form\");\n\n    for (var i = 0; i < textFields.length; i++) {\n      if (textFields[i].value == \"\") {\n        return false;\n      }\n    }\n\n    var hookFields = document.querySelectorAll(\".hooks-field\");\n\n    for (var i = 0; i < hookFields.length; i++) {\n      if (hookFields[i].value == \"\") {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"popup-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"loading-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://upload.wikimedia.org/wikipedia/commons/7/7d/Pedro_luis_romani_ruiz.gif\",\n          class: \"popup-loading\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"popup\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          onClick: this.hidePopup,\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"16\",\n          height: \"16\",\n          fill: \"currentColor\",\n          class: \"bi bi-x-lg\",\n          viewBox: \"0 0 16 16\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          class: \"text-center\",\n          children: this.props.selectedProduct != null ? 'Edit Tracker' : 'Create Tracker'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          className: \"pForm\",\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              md: 8,\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                className: \"popup-form\",\n                type: \"text\",\n                defaultValue: this.props.selectedProduct != null ? this.props.selectedProduct.name : '',\n                placeholder: \"Enter name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              md: 4,\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Starting Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                className: \"popup-form\",\n                type: \"number\",\n                defaultValue: this.props.selectedProduct != null ? this.props.selectedProduct.qty : '',\n                placeholder: \"Enter Number\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Amazon Link\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            className: \"popup-form\",\n            type: \"text\",\n            defaultValue: this.props.selectedProduct != null ? this.props.selectedProduct.link : '',\n            placeholder: \"Enter Link\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"hooks-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Hooks with Etsy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: this.addHook,\n            children: \"Add New Hook\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"hooks\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"pForm\",\n            children: this.renderHooks()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: this.createTracker,\n          id: \"create-tracker-btn\",\n          children: this.props.selectedProduct != null ? 'Edit Tracker' : 'Create Tracker'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }, this);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (document.querySelector('.popup-wrapper').style.display == \"initial\") {\n      document.querySelector(\"body\").style.overflow = \"hidden\";\n    }\n\n    if (nextProps.selectedProduct != null) {\n      console.log(nextProps.selectedProduct);\n      this.setState({\n        hooks: nextProps.selectedProduct.hooks.length\n      });\n    }\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Kaiwen Song/Desktop/Etsy-Inventory-Tracker/my-app/src/components/CreatePopup.js"],"names":["React","Form","Row","Col","Button","ReactDOM","axios","CreatePopup","Component","constructor","props","state","hooks","edit","addHook","bind","hidePopup","createTracker","resetPopup","renderHooks","validateFields","document","querySelectorAll","forEach","form","console","log","reset","setState","querySelector","style","display","overflow","alert","newTracker","fieldNames","fieldValues","i","length","value","Array","from","map","hook","losses","loss","properties","propertyList","property","classList","contains","push","innerText","selectedProduct","post","then","res","_id","data","imgSrc","src","buyDate","add","result","updateProduct","hookList","productNames","productIds","displayProperties","textFields","hookFields","render","name","qty","link","UNSAFE_componentWillReceiveProps","nextProps"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,eAAe,MAAMC,WAAN,SAA0BP,KAAK,CAACQ,SAAhC,CAAyC;AAEtDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACXC,MAAAA,KAAK,EAAE,CADI;AAEXC,MAAAA,IAAI,EAAE;AAFK,KAAb;AAKA,SAAKC,OAAL,GAAe,KAAKA,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAKC,SAAL,GAAiB,KAAKA,SAAL,CAAeD,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKE,aAAL,GAAqB,KAAKA,aAAL,CAAmBF,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKG,UAAL,GAAkB,KAAKA,UAAL,CAAgBH,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKI,WAAL,GAAmB,KAAKA,WAAL,CAAiBJ,IAAjB,CAAsB,IAAtB,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","sourcesContent":["import React from 'react'\r\nimport Form from 'react-bootstrap/Form'\r\nimport Row from 'react-bootstrap/Row'\r\nimport Col from 'react-bootstrap/Col'\r\nimport Button from 'react-bootstrap/Button'\r\nimport ReactDOM from 'react-dom'\r\nimport axios from \"axios\";\r\n\r\n// class Hook extends React.Component {\r\n//   constructor(props) {\r\n//     super(props)\r\n//\r\n//     this.state = {\r\n//       currentProperty: {},\r\n//       currentName: props.selectedProduct != null ? props.selectedProduct.hooks[props.id] : '',\r\n//       loaded: false\r\n//     }\r\n//\r\n//     if (this.props.productIds[0] != null) {\r\n//       axios.get(\"http://localhost:5000/hooks/getProperties/\" + (this.props.selectedProduct != null && this.props.selectedProduct.properties[this.props.id] != null ? this.props.productIds[this.props.productNames.indexOf(this.props.selectedProduct.hooks[this.props.id])] : this.props.productIds[0]))\r\n//         .then(response => {\r\n//           this.setState({\r\n//             currentProperty: response.data\r\n//           })\r\n//         })\r\n//     }\r\n//\r\n//     this.displayProperties = this.displayProperties.bind(this)\r\n//     this.renderHooks = this.renderHooks.bind(this)\r\n//   }\r\n//\r\n//   displayProperties(event) {\r\n//     this.setState({\r\n//       currentName: event.target.value\r\n//     })\r\n//     axios.get(\"http://localhost:5000/hooks/getProperties/\" + this.props.productIds[event.target.selectedIndex])\r\n//       .then(response => {\r\n//         this.setState({\r\n//           currentProperty: response.data\r\n//         })\r\n//       })\r\n//   }\r\n//\r\n//   renderHooks() {\r\n//     var hooks = []\r\n//\r\n//\r\n//     hooks.push(<Col md = {3}>\r\n//       <Form.Label>Product</Form.Label>\r\n//       <Form.Select onChange={this.displayProperties} className=\"form-control hooks-field\" id=\"hooks-select\" value={this.state.currentName}>\r\n//         {this.props.productNames.map(product => <option>{product}</option>)}\r\n//       </Form.Select>\r\n//     </Col>)\r\n//\r\n//     var properties = this.state.currentProperty\r\n//     var keys = Object.keys(properties)\r\n//\r\n//     for (var i = 0; i < keys.length; i++) {\r\n//       var selections = properties[keys[i]].map(property => <option>{property}</option>)\r\n//       selections.unshift(<option>{'Any'}</option>)\r\n//\r\n//       if (this.props.selectedProduct != null && this.props.selectedProduct.properties[this.props.id] != null) {\r\n//         selections = selections.filter(option => option.props.children != this.props.selectedProduct.properties[this.props.id][keys[i]])\r\n//         selections.unshift(<option>{this.props.selectedProduct.properties[this.props.id][keys[i]]}</option>)\r\n//       }\r\n//\r\n//       hooks.push(<Col md = {3}>\r\n//         <Form.Label id = \"property-select\">{keys[i]}</Form.Label>\r\n//         <Form.Select id = \"property-select\" className = \"hooks-field\">\r\n//           {selections}\r\n//         </Form.Select>\r\n//       </Col>)\r\n//     }\r\n//     hooks.push(<Col md = {3}>\r\n//       <Form.Label className = \"end\" id = \"property-select\">Loss per Order</Form.Label>\r\n//       <Form.Control id = \"property-select\" type=\"number\" placeholder=\"Enter Number\" className=\"losses-select hooks-field\" defaultValue={this.props.selectedProduct != null ? this.props.selectedProduct.losses[this.props.id] : ''}/>\r\n//     </Col>)\r\n//\r\n//     const noRows = Math.ceil(hooks.length / 4);\r\n//\r\n//     return Array.from(Array(noRows)).map((n, i) => (\r\n//       <Row>\r\n//        {hooks.slice(i* 4, (i + 1)* 4)}\r\n//       </Row>\r\n//     ));\r\n//   }\r\n//\r\n//   render() {\r\n//     return (\r\n//       <div>\r\n//         {this.renderHooks()}\r\n//       </div>\r\n//     )\r\n//   }\r\n//\r\n//   UNSAFE_componentWillReceiveProps(nextProps) {\r\n//     if (this.props.productNames.length == 0) {\r\n//       axios.get(\"http://localhost:5000/hooks/getProperties/\" + (nextProps.selectedProduct != null && nextProps.selectedProduct.properties[nextProps.id] != null ? nextProps.productIds[nextProps.productNames.indexOf(nextProps.selectedProduct.hooks[nextProps.id])] : nextProps.productIds[0]))\r\n//         .then(response => {\r\n//           console.log(response.data)\r\n//           this.setState({\r\n//             currentProperty: response.data,\r\n//             currentName: nextProps.selectedProduct != null ? nextProps.selectedProduct.hooks[nextProps.id] : '',\r\n//             loaded: true\r\n//           })\r\n//         })\r\n//     }\r\n//   }\r\n// }\r\n\r\nexport default class CreatePopup extends React.Component{\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      hooks: 1,\r\n      edit: false\r\n    }\r\n\r\n    this.addHook = this.addHook.bind(this)\r\n    this.hidePopup = this.hidePopup.bind(this)\r\n    this.createTracker = this.createTracker.bind(this)\r\n    this.resetPopup = this.resetPopup.bind(this)\r\n    this.renderHooks = this.renderHooks.bind(this)\r\n    this.validateFields = this.validateFields.bind(this)\r\n  }\r\n\r\n  resetPopup() {\r\n    document.querySelectorAll('.pForm').forEach(form => {\r\n      console.log(form)\r\n      form.reset()\r\n    })\r\n\r\n    this.setState({\r\n      hooks: 1\r\n    })\r\n  }\r\n\r\n  hidePopup() {\r\n      document.querySelector('.popup-wrapper').style.display = \"none\"\r\n      document.querySelector(\"body\").style.overflow = \"visible\";\r\n      this.resetPopup()\r\n  }\r\n\r\n  async createTracker() {\r\n\r\n    if (!this.validateFields()) {\r\n      alert(\"Please fill out all fields\")\r\n    }\r\n    else {\r\n      document.querySelector('.loading-wrapper').style.display = \"initial\"\r\n\r\n      var newTracker = {}\r\n      var fieldNames = [\"name\", \"qty\", 'link']\r\n      var fieldValues = document.querySelectorAll('.popup-form')\r\n\r\n      for (var i = 0; i < fieldNames.length; i++) {\r\n        newTracker[fieldNames[i]] = fieldValues[i].value\r\n      }\r\n\r\n      newTracker.hooks = Array.from(document.querySelectorAll('#hooks-select')).map(hook => hook.value)\r\n      newTracker.losses = Array.from(document.querySelectorAll('.losses-select')).map(loss => loss.value)\r\n\r\n      var properties = []\r\n      var propertyList = document.querySelectorAll('#property-select')\r\n      var property = {}\r\n      for (var i = 0; i < propertyList.length; i += 2) {\r\n\r\n        if (propertyList[i].classList.contains(\"end\")) {\r\n\r\n          properties.push(property)\r\n          property = {}\r\n        }\r\n        else {\r\n          property[propertyList[i].innerText] = propertyList[i + 1].value\r\n        }\r\n      }\r\n\r\n      newTracker.properties = properties\r\n\r\n      if (this.props.selectedProduct == null) {\r\n        axios.post(\"http://localhost:5000/trackers/addTracker\", newTracker)\r\n          .then(res => {\r\n            newTracker._id = res.data._id\r\n            newTracker.imgSrc = res.data.src\r\n            newTracker.buyDate = res.data.buyDate\r\n\r\n            this.props.add(newTracker)\r\n\r\n            document.querySelector('.loading-wrapper').style.display = \"none\"\r\n            this.hidePopup()\r\n          })\r\n      }\r\n      else {\r\n        newTracker._id = this.props.selectedProduct._id\r\n        newTracker.imgSrc = this.props.selectedProduct.imgSrc\r\n\r\n        var result = await axios.post(\"http://localhost:5000/trackers/updateTracker/\" + this.props.selectedProduct._id, newTracker)\r\n        newTracker.buyDate = result.data.buyDate\r\n        this.props.updateProduct(newTracker)\r\n\r\n        document.querySelector('.loading-wrapper').style.display = \"none\"\r\n        this.hidePopup()\r\n      }\r\n    }\r\n  }\r\n\r\n  addHook() {\r\n    this.setState({\r\n      hooks: this.state.hooks + 1\r\n    })\r\n  }\r\n\r\n  renderHooks() {\r\n    var hookList = []\r\n\r\n    for (var i = 0; i < this.state.hooks; i++) {\r\n      hookList.push(<Hook id = {i} key = {i} productNames = {this.props.productNames} productIds = {this.props.productIds} selectedProduct={this.props.selectedProduct} displayProperties={this.displayProperties}/>)\r\n    }\r\n\r\n    return hookList\r\n  }\r\n\r\n  validateFields() {\r\n\r\n    var textFields = document.querySelectorAll(\".popup-form\")\r\n    for (var i = 0; i < textFields.length; i++) {\r\n      if (textFields[i].value == \"\") {\r\n        return false\r\n      }\r\n    }\r\n\r\n    var hookFields = document.querySelectorAll(\".hooks-field\")\r\n    for (var i = 0; i < hookFields.length; i++) {\r\n      if (hookFields[i].value == \"\") {\r\n        return false\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div class = \"popup-wrapper\">\r\n        <div class = \"loading-wrapper\">\r\n          <img src = \"https://upload.wikimedia.org/wikipedia/commons/7/7d/Pedro_luis_romani_ruiz.gif\" class = \"popup-loading\"></img>\r\n        </div>\r\n        <div class = \"popup\">\r\n          <svg onClick={this.hidePopup} xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-x-lg\" viewBox=\"0 0 16 16\">\r\n            <path d=\"M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z\"/>\r\n          </svg>\r\n          <h1 class = \"text-center\">{this.props.selectedProduct != null ? 'Edit Tracker' : 'Create Tracker'}</h1>\r\n          <Form className = \"pForm\">\r\n            <Row>\r\n              <Col md = {8}>\r\n                <Form.Label>Name</Form.Label>\r\n                <Form.Control className = \"popup-form\" type=\"text\" defaultValue={this.props.selectedProduct != null ? this.props.selectedProduct.name : ''} placeholder=\"Enter name\" />\r\n              </Col>\r\n              <Col md = {4}>\r\n                <Form.Label>Starting Quantity</Form.Label>\r\n                <Form.Control className = \"popup-form\" type=\"number\" defaultValue={this.props.selectedProduct != null ? this.props.selectedProduct.qty : ''} placeholder=\"Enter Number\" />\r\n              </Col>\r\n            </Row>\r\n            <Form.Label>Amazon Link</Form.Label>\r\n            <Form.Control className = \"popup-form\" type=\"text\" defaultValue={this.props.selectedProduct != null ? this.props.selectedProduct.link : ''} placeholder=\"Enter Link\" />\r\n          </Form>\r\n\r\n          <div class = \"hooks-header\">\r\n            <h3>Hooks with Etsy</h3>\r\n            <Button onClick = {this.addHook}>Add New Hook</Button>\r\n          </div>\r\n          <div class = \"hooks\">\r\n            <form className = \"pForm\">\r\n              {this.renderHooks()}\r\n            </form>\r\n          </div>\r\n\r\n          <Button onClick = {this.createTracker} id = \"create-tracker-btn\">{this.props.selectedProduct != null ? 'Edit Tracker' : 'Create Tracker'}</Button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (document.querySelector('.popup-wrapper').style.display == \"initial\") {\r\n      document.querySelector(\"body\").style.overflow = \"hidden\";\r\n    }\r\n\r\n    if (nextProps.selectedProduct != null) {\r\n      console.log(nextProps.selectedProduct)\r\n      this.setState({\r\n        hooks: nextProps.selectedProduct.hooks.length\r\n      })\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}